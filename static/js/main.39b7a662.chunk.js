(this["webpackJsonpdraftjs-conductor"]=this["webpackJsonpdraftjs-conductor"]||[]).push([[0],{100:function(t,e,n){},102:function(t,e,n){},196:function(t,e,n){},197:function(t,e,n){},198:function(t,e,n){"use strict";n.r(e);var r=n(5),i=n(49),o=n.n(i),a=(n(93),n(94),n(95),n(96),n(97),n(98),n(99),n(100),n(21)),c=n(22),l=n(24),s=n(23),d=(n(102),n(11)),u=n(3),h="public-DraftStyleDefault-depth",y=function(t,e,n){for(var r="",i=e;i<=n;i++){var o=String(i),a="".concat(t).concat(o),c="ol".concat(o),l=String(1.5*(i+1));r+="\n.".concat(a,".public-DraftStyleDefault-listLTR { margin-left: ").concat(l,"em; }\n.").concat(a,".public-DraftStyleDefault-listRTL { margin-right: ").concat(l,"em; }\n.").concat(a,".public-DraftStyleDefault-orderedListItem::before { content: counter(").concat(c,") '. '; counter-increment: ").concat(c,"; }\n.").concat(a,".public-DraftStyleDefault-reset { counter-reset: ").concat(c,"; }")}return r},p=function(t){var e=t.getDepth();return e>4?"".concat(h).concat(String(e)):""},b=function(t,e){var n;if(t){var r=Object(u.convertFromRaw)(t);n=u.EditorState.createWithContent(r,e)}else n=u.EditorState.createEmpty(e);return n},g=function(t){var e=t.getCurrentContent(),n=Object(u.convertToRaw)(e);return n.blocks.every((function(t){return 0===t.text.trim().length&&(!t.entityRanges||0===t.entityRanges.length)&&(!t.inlineStyleRanges||0===t.inlineStyleRanges.length)}))?null:n},f=n(20),j=n.n(f),m=n(39),v=n.n(m),O=n(50),x=n.n(O),k=n(51),S=n.n(k),E="data-draftjs-conductor-fragment",C='[data-contents="true"] [contenteditable="false"]',w=function(t,e){var n=window.getSelection();if(e.clipboardData&&0!==n.rangeCount&&!function(t){var e=t.anchorNode,n=t.focusNode;if(!e||!n)return!1;var r=e instanceof Element?e:e.parentElement,i=n instanceof Element?n:n.parentElement,o=r&&r.closest(C),a=i&&i.closest(C);return o&&a&&(o.contains(a)||a.contains(o))}(n)){var r=function(t,e){var n=v()(t,e).selectionState,r=j()(t.getCurrentContent(),n);return r.every((function(t){return 0===t.getText().length}))?null:r}(t._latestEditorState,t.editor);if(r){var i=u.ContentState.createFromBlockArray(r.toArray()),o=JSON.stringify(Object(u.convertToRaw)(i)),a=document.createElement("div");a.appendChild(n.getRangeAt(0).cloneContents()),a.setAttribute(E,o),a.setAttribute("style","white-space: pre-wrap;"),e.clipboardData.setData("text/plain",n.toString()),e.clipboardData.setData("text/html",a.outerHTML),e.preventDefault()}}},R=function(t,e){w(t,e),x()(t,e)},D=function(t,e){w(t,e),S()(t,e)},T=function(t,e){var n=function(t){if(""===t||"undefined"===typeof t||null===t)return null;var e=(new DOMParser).parseFromString(t,"text/html").querySelector("[".concat(E,"]"));if(e){var n,r=e.getAttribute(E);try{n=JSON.parse(r)}catch(i){return null}return Object(u.convertFromRaw)(n)}return null}(t);if(n){var r=n.getBlockMap(),i=u.Modifier.replaceWithFragment(e.getCurrentContent(),e.getSelection(),r);return u.EditorState.push(e,i,"insert-fragment")}return!1},B=n(0),L=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).state={error:null},r}return Object(c.a)(n,[{key:"componentDidCatch",value:function(t,e){var n=!!window.Raven;this.setState({error:t}),n&&window.Raven.captureException(t,{extra:e})}},{key:"render",value:function(){var t=this.props.children,e=this.state.error,n=!!window.Raven;return e?Object(B.jsx)("div",{className:"DraftEditor-root",children:Object(B.jsx)("div",{className:"DraftEditor-editorContainer",children:Object(B.jsx)("div",{className:"public-DraftEditor-content",children:Object(B.jsxs)("div",{className:"u-text-center",children:[Object(B.jsx)("p",{children:"Oops. The editor just crashed."}),Object(B.jsx)("p",{children:"Our team has been notified. You can provide us with more information if you want to."}),Object(B.jsxs)("div",{children:[n?Object(B.jsx)("button",{type:"button",onClick:function(){return window.Raven.lastEventId()&&window.Raven.showReportDialog()},children:"Submit a report"}):Object(B.jsx)("a",{href:"https://github.com/thibaudcolas/draftjs-conductor/issues",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"Open a GitHub issue"}),Object(B.jsx)("span",{children:"\xa0"}),Object(B.jsx)("button",{type:"button",onClick:function(){return window.location.reload(!1)},children:"Reload the page"})]})]})})})}):t}}]),n}(r.Component),A=function(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},I=function(t){var e=t.value;return Object(B.jsxs)("pre",{style:{position:"relative"},children:[Object(B.jsx)("button",{onClick:A.bind(null,e),style:{position:"absolute",right:"1rem"},children:"Copy"}),Object(B.jsx)("code",{children:e})]})},N=function(t,e,n){t.findEntityRanges((function(t){var e=t.getEntity();return null!==e&&"LINK"===n.getEntity(e).getType()}),e)},M=function(t){var e=t.contentState,n=t.entityKey,r=t.children,i=e.getEntity(n);return Object(B.jsx)("span",{className:"link",title:i.getData().url,children:r})},U=function(t){var e=t.block,n=t.contentState,r=e.getEntityAt(0),i=r?n.getEntity(r).getData().src:"/404";return Object(B.jsxs)("div",{children:[Object(B.jsx)("p",{children:"Image:"}),Object(B.jsx)("img",{src:i,alt:"",width:"256"})]})},H=(n(197),function(t){var e=t.block,n=t.contentState,r=e.getEntityAt(0),i=r?n.getEntity(r).getData().text:"Placeholder";return Object(B.jsxs)("div",{className:"Snippet",contentEditable:!1,children:["This is a snippet block:",Object(B.jsx)("div",{className:"Snippet__text",contentEditable:!1,children:i})]})}),P={addLineBreak:function(t){var e=t.getCurrentContent(),n=t.getSelection();if(n.isCollapsed())return u.RichUtils.insertSoftNewline(t);var r=u.Modifier.removeRange(e,n,"forward"),i=r.getSelectionAfter(),o=r.getBlockForKey(i.getStartKey());return r=u.Modifier.insertText(r,i,"\n",o.getInlineStyleAt(i.getStartOffset()),null),u.EditorState.push(t,r,"insert-fragment")}},F=(n(196),{unstyled:"P","unordered-list-item":"UL","ordered-list-item":"OL","header-one":"H1","header-two":"H2","header-three":"H3","code-block":"{ }"}),K={unstyled:"P","unordered-list-item":"UL","ordered-list-item":"OL","header-one":"H1","header-two":"H2","header-three":"H3","header-four":"H4","header-five":"H5","header-six":"H6",blockquote:"\u275d","code-block":"{ }"},_={BOLD:"B",ITALIC:"I"},q={BOLD:"B",ITALIC:"I",CODE:"`",STRIKETHROUGH:"~",UNDERLINE:"_"},J=[{type:"LINK",label:"\ud83d\udd17",attributes:["url"],whitelist:{href:"^(http:|https:|undefined$)"}},{type:"IMAGE",label:"\ud83d\udcf7",attributes:["src"],whitelist:{src:"^http"}},{type:"SNIPPET",label:"\ud83c\udf31",attributes:["text"],whitelist:{}},{type:"HORIZONTAL_RULE",label:"HR",attributes:[],whitelist:{}}],W=Object(B.jsx)("style",{children:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return y(n,e,t)}(15)}),G=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(t){var r;Object(a.a)(this,n),r=e.call(this,t);var i=t.rawContentState,o=new u.CompositeDecorator([{strategy:N,component:M}]);return r.state={editorState:b(i,o),readOnly:!1},r.onChange=r.onChange.bind(Object(d.a)(r)),r.keyBindingFn=r.keyBindingFn.bind(Object(d.a)(r)),r.addBR=r.addBR.bind(Object(d.a)(r)),r.toggleReadOnly=r.toggleReadOnly.bind(Object(d.a)(r)),r.toggleStyle=r.toggleStyle.bind(Object(d.a)(r)),r.toggleBlock=r.toggleBlock.bind(Object(d.a)(r)),r.toggleEntity=r.toggleEntity.bind(Object(d.a)(r)),r.blockRenderer=r.blockRenderer.bind(Object(d.a)(r)),r.handlePastedText=r.handlePastedText.bind(Object(d.a)(r)),r}return Object(c.a)(n,[{key:"onChange",value:function(t){this.setState({editorState:t})}},{key:"toggleStyle",value:function(t,e){var n=this.state.editorState;this.onChange(u.RichUtils.toggleInlineStyle(n,t)),e.preventDefault()}},{key:"toggleBlock",value:function(t,e){var n=this.state.editorState;this.onChange(u.RichUtils.toggleBlockType(n,t)),e.preventDefault()}},{key:"toggleEntity",value:function(t){var e=this.state.editorState,n=e.getCurrentContent();if("IMAGE"===t){var r=(n=n.createEntity(t,"IMMUTABLE",{src:"https://thibaudcolas.github.io/draftjs-conductor/wysiwyg-magic-wand.png"})).getLastCreatedEntityKey();this.onChange(u.AtomicBlockUtils.insertAtomicBlock(e,r," "))}else if("SNIPPET"===t){var i=(n=n.createEntity(t,"IMMUTABLE",{text:"Content of the snippet goes here"})).getLastCreatedEntityKey();this.onChange(u.AtomicBlockUtils.insertAtomicBlock(e,i," "))}else if("HORIZONTAL_RULE"===t){var o=(n=n.createEntity(t,"IMMUTABLE",{})).getLastCreatedEntityKey();this.onChange(u.AtomicBlockUtils.insertAtomicBlock(e,o," "))}else{var a=(n=n.createEntity(t,"MUTABLE",{url:"http://www.example.com/"})).getLastCreatedEntityKey(),c=e.getSelection();this.onChange(u.RichUtils.toggleLink(e,c,a))}}},{key:"blockRenderer",value:function(t){var e=this.state.editorState.getCurrentContent();if("atomic"!==t.getType())return null;var n=t.getEntityAt(0);if(!n)return{editable:!1};var r=e.getEntity(n);return"HORIZONTAL_RULE"===r.getType()?{component:function(){return Object(B.jsx)("hr",{})},editable:!1}:"SNIPPET"===r.getType()?{component:H,editable:!1}:{component:U,editable:!1}}},{key:"handlePastedText",value:function(t,e,n){var r=T(e,n);return!!r&&(this.onChange(r),!0)}},{key:"keyBindingFn",value:function(t){switch(t.keyCode){case 9:var e=this.state.editorState,n=u.RichUtils.onTab(t,e,15);return this.onChange(n),null;default:return Object(u.getDefaultKeyBinding)(t)}}},{key:"addBR",value:function(t){var e=this.state.editorState;this.onChange(P.addLineBreak(e)),t.preventDefault()}},{key:"toggleReadOnly",value:function(t){this.setState((function(t){return{readOnly:!t.readOnly}})),t.preventDefault()}},{key:"render",value:function(){var t=this,e=this.props.extended,n=this.state,r=n.editorState,i=n.readOnly,o=e?q:_,a=e?K:F;return Object(B.jsxs)("div",{className:"DemoEditor",children:[Object(B.jsxs)(L,{children:[Object(B.jsxs)("div",{className:"EditorToolbar",children:[Object.keys(o).map((function(e){return Object(B.jsx)("button",{onMouseDown:t.toggleStyle.bind(t,e),children:q[e]},e)})),Object.keys(a).map((function(e){return Object(B.jsx)("button",{onMouseDown:t.toggleBlock.bind(t,e),children:K[e]},e)})),J.map((function(e){return Object(B.jsx)("button",{onMouseDown:t.toggleEntity.bind(t,e.type),children:e.label},e.type)})),Object(B.jsx)("button",{onMouseDown:this.addBR,children:"BR"}),Object(B.jsx)("button",{onMouseDown:this.toggleReadOnly,children:i?"\ud83d\udcd5":"\ud83d\udcd6"})]}),Object(B.jsx)(u.Editor,{editorState:r,readOnly:i,onChange:this.onChange,stripPastedStyles:!1,blockRendererFn:this.blockRenderer,blockStyleFn:p,keyBindingFn:this.keyBindingFn,onCopy:R,onCut:D,handlePastedText:this.handlePastedText})]}),W,Object(B.jsxs)("details",{children:[Object(B.jsx)("summary",{children:Object(B.jsx)("span",{className:"link",children:"Debug"})}),Object(B.jsx)(I,{value:JSON.stringify(g(r),null,2)})]})]})}}]),n}(r.Component);G.defaultProps={rawContentState:null};var Z=G,Y={blocks:[{key:"8qfte",text:"Copy this content",type:"header-two"},{key:"6m80m",text:" ",type:"atomic",entityRanges:[{offset:0,length:1,key:0}]},{key:"c0ala",text:"",type:"unstyled"},{key:"7knr3",text:"From here",type:"header-three"},{key:"er6ke",text:"To the editor below!",type:"unordered-list-item"},{key:"47a3o",text:" ",type:"atomic",entityRanges:[{offset:0,length:1,key:1}]},{key:"826u0",text:"Numbered list",type:"ordered-list-item"}],entityMap:{0:{type:"HORIZONTAL_RULE",mutability:"IMMUTABLE",data:{}},1:{type:"SNIPPET",mutability:"IMMUTABLE",data:{text:"Content of the snippet goes here"}}}},$={blocks:[{key:"ako0c",text:"Infinite",type:"unordered-list-item",depth:0},{key:"adreo",text:"Nested",type:"unordered-list-item",depth:1},{key:"bm3ec",text:"List",type:"unordered-list-item",depth:2},{key:"aqg1s",text:"Nesting",type:"unordered-list-item",depth:3},{key:"4dns4",text:"Styles",type:"unordered-list-item",depth:4},{key:"5k6tv",text:"Work",type:"unordered-list-item",depth:5},{key:"9htu8",text:"For",type:"unordered-list-item",depth:6},{key:"at7om",text:"As",type:"unordered-list-item",depth:7},{key:"8fddl",text:"Many",type:"unordered-list-item",depth:8},{key:"2ja3i",text:"Levels",type:"unordered-list-item",depth:9},{key:"cv49i",text:"As",type:"unordered-list-item",depth:10},{key:"4aoq9",text:"Configured",type:"unordered-list-item",depth:11},{key:"d4hhk",text:"Here",type:"unordered-list-item",depth:12},{key:"bbeuk",text:"Up",type:"unordered-list-item",depth:13},{key:"6s9a8",text:"To",type:"unordered-list-item",depth:14},{key:"48sq1",text:"15!",type:"unordered-list-item",depth:15}],entityMap:{}},z=function(t){Object(l.a)(n,t);var e=Object(s.a)(n);function n(){return Object(a.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(B.jsxs)("div",{className:"App",children:[Object(B.jsx)("h2",{children:"Idempotent copy-paste between editors"}),Object(B.jsx)("p",{children:"The default Draft.js copy-paste handlers lose a lot of the formatting when copy-pasting between Draft.js editors. While this might be ok for some use cases, sites with multiple editors on the same page need them to reliably support copy-paste."}),Object(B.jsx)(Z,{extended:!0,rawContentState:Y}),Object(B.jsx)(Z,{extended:!1}),Object(B.jsx)("h2",{children:"Infinite list nesting"}),Object(B.jsx)("p",{children:"By default, Draft.js only provides support for 5 list levels for bulleted and numbered lists. While this is often more than enough, some editors need to go further. This provides infinite list nesting styles."}),Object(B.jsx)(Z,{extended:!1,rawContentState:$})]})}}]),n}(r.Component),Q=document.getElementById("root");Q&&o.a.render(Object(B.jsx)(z,{}),Q)},93:function(t,e,n){},94:function(t,e,n){},95:function(t,e,n){},96:function(t,e,n){},98:function(t,e,n){},99:function(t,e,n){}},[[198,1,2]]]);
//# sourceMappingURL=main.39b7a662.chunk.js.map